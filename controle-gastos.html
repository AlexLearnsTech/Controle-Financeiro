<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro - Igreja</title>
    <style>
        :root {
            --primary: #3a568c;
            --primary-light: #4a73b8;
            --accent: #a1b6dd;
            --light: #f5f7fa;
            --dark: #252525;
            --success: #4caf50;
            --danger: #f44336;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        h1 {
            text-align: center;
            font-size: 28px;
        }

        h2 {
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .card p {
            font-size: 28px;
            font-weight: bold;
        }

        .card.entrada p {
            color: var(--success);
        }

        .card.saida p {
            color: var(--danger);
        }

        .card.saldo p {
            color: var(--primary);
        }

        .form-section {
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--primary);
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: var(--primary-light);
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #5cb85c;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #e53935;
        }

        .transacoes {
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            flex: 1;
            text-align: center;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .tab.active {
            background-color: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
            padding: 20px;
        }

        .tab-content.active {
            display: block;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: var(--accent);
            color: var(--primary);
            font-weight: bold;
        }

        tr:hover {
            background-color: rgba(161, 182, 221, 0.1);
        }

        .action-btn {
            padding: 6px 12px;
            font-size: 14px;
        }

        .empty-message {
            text-align: center;
            padding: 20px;
            color: #888;
        }

        .entrada-row {
            border-left: 4px solid var(--success);
        }

        .saida-row {
            border-left: 4px solid var(--danger);
        }

        .valor-positivo {
            color: var(--success);
            font-weight: bold;
        }

        .valor-negativo {
            color: var(--danger);
            font-weight: bold;
        }

        .data-cell {
            white-space: nowrap;
        }

        .search-bar {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .search-bar input {
            flex: 1;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            th, td {
                padding: 8px;
            }
            
            .responsive-table {
                overflow-x: auto;
            }
        }

        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .back-to-top.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Sistema de Controle Financeiro</h1>
        </div>
    </header>

    <div class="container">
        <div class="dashboard">
            <div class="card entrada">
                <h3>Total de Entradas</h3>
                <p id="total-entradas">R$ 0,00</p>
            </div>
            <div class="card saida">
                <h3>Total de Saídas</h3>
                <p id="total-saidas">R$ 0,00</p>
            </div>
            <div class="card saldo">
                <h3>Saldo Atual</h3>
                <p id="saldo-atual">R$ 0,00</p>
            </div>
        </div>

        <div class="form-section">
            <h2>Registrar Nova Transação</h2>
            <div class="form-grid">
                <div>
                    <div class="form-group">
                        <label for="tipo">Tipo de Transação</label>
                        <select id="tipo" required>
                            <option value="entrada">Entrada</option>
                            <option value="saida">Saída</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="categoria">Categoria</label>
                        <select id="categoria">
                            <option value="Dízimo">Dízimo</option>
                            <option value="Oferta">Oferta</option>
                            <option value="Campanha">Campanha</option>
                            <option value="Aluguel">Aluguel</option>
                            <option value="Água/Luz">Água/Luz</option>
                            <option value="Manutenção">Manutenção</option>
                            <option value="Material">Material</option>
                            <option value="Salários">Salários</option>
                            <option value="Ação Social">Ação Social</option>
                            <option value="Eventos">Eventos</option>
                            <option value="Missões">Missões</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="valor">Valor (R$)</label>
                        <input type="number" id="valor" step="0.01" min="0.01" required placeholder="0,00">
                    </div>
                </div>
                <div>
                    <div class="form-group">
                        <label for="data">Data</label>
                        <input type="date" id="data" required>
                    </div>
                    <div class="form-group">
                        <label for="descricao">Descrição</label>
                        <textarea id="descricao" placeholder="Detalhes sobre a transação"></textarea>
                    </div>
                </div>
            </div>
            <button id="adicionar-transacao" class="btn-success">Registrar Transação</button>
        </div>

        <div class="transacoes">
            <div class="tabs">
                <div class="tab active" data-tab="todas">Todas as Transações</div>
                <div class="tab" data-tab="entradas">Entradas</div>
                <div class="tab" data-tab="saidas">Saídas</div>
            </div>

            <div class="tab-content active" id="todas">
                <div class="search-bar">
                    <input type="text" id="pesquisa" placeholder="Pesquisar transações...">
                    <button id="btn-pesquisar">Buscar</button>
                </div>
                <div class="responsive-table">
                    <table id="tabela-todas">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Tipo</th>
                                <th>Categoria</th>
                                <th>Descrição</th>
                                <th>Valor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="transacoes-todas">
                            <!-- As transações serão inseridas aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="empty-todas" class="empty-message">Nenhuma transação registrada</div>
            </div>

            <div class="tab-content" id="entradas">
                <div class="responsive-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Categoria</th>
                                <th>Descrição</th>
                                <th>Valor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="transacoes-entradas">
                            <!-- As entradas serão inseridas aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="empty-entradas" class="empty-message">Nenhuma entrada registrada</div>
            </div>

            <div class="tab-content" id="saidas">
                <div class="responsive-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Categoria</th>
                                <th>Descrição</th>
                                <th>Valor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="transacoes-saidas">
                            <!-- As saídas serão inseridas aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="empty-saidas" class="empty-message">Nenhuma saída registrada</div>
            </div>
        </div>
    </div>

    <div class="back-to-top">↑</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Definir a data de hoje no campo de data
            const hoje = new Date().toISOString().split('T')[0];
            document.getElementById('data').value = hoje;

            // Inicializar transações do localStorage ou criar um array vazio
            let transacoes = JSON.parse(localStorage.getItem('transacoes')) || [];

            // Funções para manipular transações
            function adicionarTransacao() {
                const tipo = document.getElementById('tipo').value;
                const categoria = document.getElementById('categoria').value;
                const valor = parseFloat(document.getElementById('valor').value);
                const data = document.getElementById('data').value;
                const descricao = document.getElementById('descricao').value;

                // Validação básica
                if (!valor || valor <= 0) {
                    alert('Por favor, insira um valor válido.');
                    return;
                }

                if (!data) {
                    alert('Por favor, insira uma data.');
                    return;
                }

                // Criar objeto da transação
                const novaTransacao = {
                    id: Date.now(), // ID único baseado em timestamp
                    tipo: tipo,
                    categoria: categoria,
                    valor: valor,
                    data: data,
                    descricao: descricao
                };

                // Adicionar ao array e salvar no localStorage
                transacoes.push(novaTransacao);
                salvarTransacoes();

                // Limpar formulário
                document.getElementById('valor').value = '';
                document.getElementById('descricao').value = '';

                // Atualizar a interface
                atualizarInterface();
            }

            function excluirTransacao(id) {
                if (confirm('Tem certeza que deseja excluir esta transação?')) {
                    transacoes = transacoes.filter(transacao => transacao.id !== id);
                    salvarTransacoes();
                    atualizarInterface();
                }
            }

            function salvarTransacoes() {
                localStorage.setItem('transacoes', JSON.stringify(transacoes));
            }

            function atualizarInterface() {
                // Ordenar transações por data (mais recentes primeiro)
                transacoes.sort((a, b) => new Date(b.data) - new Date(a.data));

                // Calcular totais
                const totais = transacoes.reduce((acc, transacao) => {
                    if (transacao.tipo === 'entrada') {
                        acc.entradas += transacao.valor;
                    } else {
                        acc.saidas += transacao.valor;
                    }
                    return acc;
                }, { entradas: 0, saidas: 0 });

                const saldo = totais.entradas - totais.saidas;

                // Atualizar cards de totais
                document.getElementById('total-entradas').textContent = formatarValor(totais.entradas);
                document.getElementById('total-saidas').textContent = formatarValor(totais.saidas);
                document.getElementById('saldo-atual').textContent = formatarValor(saldo);

                // Atualizar tabelas
                atualizarTabela('todas', transacoes);
                atualizarTabela('entradas', transacoes.filter(t => t.tipo === 'entrada'));
                atualizarTabela('saidas', transacoes.filter(t => t.tipo === 'saida'));
            }

            function atualizarTabela(tipo, dados) {
                const tbody = document.getElementById(`transacoes-${tipo}`);
                const emptyMessage = document.getElementById(`empty-${tipo}`);
                
                // Limpar tabela
                tbody.innerHTML = '';
                
                if (dados.length === 0) {
                    emptyMessage.style.display = 'block';
                } else {
                    emptyMessage.style.display = 'none';
                    
                    dados.forEach(transacao => {
                        const tr = document.createElement('tr');
                        tr.className = transacao.tipo === 'entrada' ? 'entrada-row' : 'saida-row';
                        
                        // Formatar data para exibição
                        const dataFormatada = formatarData(transacao.data);
                        
                        const valorFormatado = formatarValor(transacao.valor);
                        const classeValor = transacao.tipo === 'entrada' ? 'valor-positivo' : 'valor-negativo';
                        
                        // Conteúdo da linha da tabela
                        let rowContent = `
                            <td class="data-cell">${dataFormatada}</td>
                        `;
                        
                        // Adicionar coluna 'Tipo' apenas na tabela 'todas'
                        if (tipo === 'todas') {
                            rowContent += `
                                <td>${transacao.tipo === 'entrada' ? 'Entrada' : 'Saída'}</td>
                            `;
                        }
                        
                        rowContent += `
                            <td>${transacao.categoria}</td>
                            <td>${transacao.descricao || '-'}</td>
                            <td class="${classeValor}">${valorFormatado}</td>
                            <td>
                                <button class="btn-danger action-btn" data-id="${transacao.id}">Excluir</button>
                            </td>
                        `;
                        
                        tr.innerHTML = rowContent;
                        tbody.appendChild(tr);
                        
                        // Adicionar evento ao botão de excluir
                        tr.querySelector('button').addEventListener('click', function() {
                            excluirTransacao(transacao.id);
                        });
                    });
                }
            }

            // Funções utilitárias
            function formatarValor(valor) {
                return `R$ ${valor.toFixed(2).replace('.', ',').replace(/\B(?=(\d{3})+(?!\d))/g, ".")}`;
            }

            function formatarData(dataStr) {
                const data = new Date(dataStr);
                return data.toLocaleDateString('pt-BR');
            }

            // Configuração de eventos
            document.getElementById('adicionar-transacao').addEventListener('click', adicionarTransacao);
            
            // Funcionalidade das abas
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    // Atualizar classes ativas nas abas
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Mostrar conteúdo da aba selecionada
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabName).classList.add('active');
                });
            });
            
            // Funcionalidade de pesquisa
            document.getElementById('btn-pesquisar').addEventListener('click', function() {
                const termo = document.getElementById('pesquisa').value.toLowerCase();
                
                if (termo) {
                    const resultados = transacoes.filter(t => 
                        t.descricao.toLowerCase().includes(termo) || 
                        t.categoria.toLowerCase().includes(termo)
                    );
                    atualizarTabela('todas', resultados);
                } else {
                    atualizarTabela('todas', transacoes);
                }
            });
            
            document.getElementById('pesquisa').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('btn-pesquisar').click();
                }
            });
            
            // Função para o botão "Voltar ao topo"
            const backToTop = document.querySelector('.back-to-top');
            
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            });
            
            backToTop.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            // Inicializar a interface
            atualizarInterface();
        });
    </script>
</body>
</html>